#================================================================================
# AXA-XL - PSU Somalia Code for POINT ANALYSIS
# HLG April 2021
# Code for point analysis
#================================================================================
rm(list=ls())

#--------------------------------------------------------------------------------
# What location do you want? (in long/lat)
#--------------------------------------------------------------------------------
 location <- data.frame(lon = 42.236,
                       lat = 3.504)

#--------------------------------------------------------------------------------
# What dates do you want? (in YYYY-MM-DD)
#--------------------------------------------------------------------------------
 startdate <- as.Date("1983-01-01")
 enddate   <- as.Date("2021-05-04")


#================================================================================
# SETUP-CODE - DO NOT EDIT BELOW THIS POINT 
#================================================================================
 # Load the file/foldÃ¥er locations
 #--------------------------------------------------------------------------------
  source("1_Libraries.r")
  source("1_Locations.r")

 #--------------------------------------------------------------------------------
 # Make a runset name
 #--------------------------------------------------------------------------------
  runset <- paste("Point_",
                 sprintf("%07.3f", round(location$lon,3)),"-",sprintf("%07.3f", round(location$lat,3)),
                 "_",format.Date(startdate,"%Y"),"-",format.Date(enddate,"%Y"),
                 "_",format.Date(Sys.Date(),"%Y%m%d"),sep="")
  runset <- str_replace_all(runset,"\\.","")
  
 #--------------------------------------------------------------------------------
 # Create a runset output folder
 #--------------------------------------------------------------------------------
  dir_Runset <- RunsetDirectory(dir_Output,runset=runset,type="1_Point",create=TRUE)
 
 #--------------------------------------------------------------------------------
 # Make spatial  versions of the location files
 #--------------------------------------------------------------------------------
  location.sp <- location
  coordinates(location.sp) <- c("lon","lat")
  proj4string(location.sp) <- CRS("+init=epsg:4326")
  location.sf <- st_as_sf(location.sp)
  
#--------------------------------------------------------------------------------
# Make date list
#--------------------------------------------------------------------------------
  datelist <- seq(from=startdate,to=enddate,by="d")  
  
#================================================================================
# MAJOR CODE
#================================================================================
 #--------------------------------------------------------------------------------
 # Download the data and save
 #--------------------------------------------------------------------------------
 #source(paste(dir_Code_Download,"1_Point_download.r",sep=computer_sep))
 
 
 
 
 
 
 
 
 